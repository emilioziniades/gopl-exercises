<!DOCTYPE html><html lang="en"><head>

<link rel="preconnect" href="https://www.googletagmanager.com"/>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-W8MVQXG');</script>
  
<meta charset="utf-8"/>
<meta name="description" content="Go is an open source programming language that makes it easy to build simple, reliable, and efficient software."/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="theme-color" content="#00add8"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:400,500,600|Work+Sans:400,500,600|Roboto:400,500,700|Open+Sans:Source+Code+Pro|Material+Icons"/>
<link rel="stylesheet" href="/css/styles.css"/>

  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-W8MVQXG');</script>
  
<script src="/js/site.js"></script>
<title>Developing a major version update - The Go Programming Language</title>
</head>
<body class="Site">
  
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8MVQXG"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  


<header class="Site-header js-siteHeader">
  <div class="Header Header--dark">
    <nav class="Header-nav">
      <a href=".///index.html">
        <img class="js-headerLogo Header-logo" src="/images/go-logo-white.svg" alt="Go"/>
      </a>
      <div class="Header-rightContent">
        <ul class="Header-menu">
          <li class="Header-menuItem ">
            <a href=".//solutions//index.html">Why Go</a>
          </li>
          <li class="Header-menuItem ">
            <a href=".//learn//index.html">Get Started</a>
          </li>
          <li class="Header-menuItem  Header-menuItem--active">
            <a href=".//doc//index.html">Docs</a>
          </li>
          <li class="Header-menuItem ">
            <a href=".//index.html">Packages</a>
          </li>
          <li class="Header-menuItem ">
            <a href=".//play//index.html">Play</a>
          </li>
          <li class="Header-menuItem ">
            <a href=".//blog//index.html">Blog</a>
          </li>
        </ul>
        <button class="Header-navOpen js-headerMenuButton Header-navOpen--white" aria-label="Open navigation.">
        </button>
      </div>
    </nav>
    
  </div>
</header>
<aside class="NavigationDrawer js-header">
  <nav class="NavigationDrawer-nav">
    <div class="NavigationDrawer-header">
      <a href=".///index.html">
        <img class="NavigationDrawer-logo" src="/images/go-logo-blue.svg" alt="Go."/>
      </a>
    </div>
    <ul class="NavigationDrawer-list">
        <li class="NavigationDrawer-listItem ">
          <a href=".//solutions//index.html">Why Go</a>
        </li>
        <li class="NavigationDrawer-listItem ">
          <a href=".//learn//index.html">Get Started</a>
        </li>
        <li class="NavigationDrawer-listItem  NavigationDrawer-listItem--active">
          <a href=".//doc//index.html">Docs</a>
        </li>
        <li class="NavigationDrawer-listItem ">
          <a href=".//index.html">Packages</a>
        </li>
        <li class="NavigationDrawer-listItem ">
          <a href=".//play//index.html">Play</a>
        </li>
        <li class="NavigationDrawer-listItem ">
          <a href=".//blog//index.html">Blog</a>
        </li>
    </ul>
  </nav>
</aside>
<div class="NavigationDrawer-scrim js-scrim" role="presentation"></div>
<main class="SiteContent SiteContent--default">
  


<article class="Doc Article">


<h1>Developing a major version update</h1>






<div id="nav" class="TOC"></div>


<p>You must update to a major version when changes you’re making in a potential new
version can’t guarantee backward compatibility for the module’s users. For
example, you’ll make this change if you change your module’s public API such
that it breaks client code using previous versions of the module.</p>
<blockquote>
<p><strong>Note:</strong> Each release type – major, minor, patch, or pre-release – has a
different meaning for a module’s users. Those users rely on these differences to
understand the level of risk a release represents to their own code. In other
words, when preparing a release, be sure that its version number accurately
reflects the nature of the changes since the preceding release. For more on
version numbers, see <a href=".//doc/modules/version-numbers/index.html">Module version numbering</a>.</p>
</blockquote>
<p><strong>See also</strong></p>
<ul>
<li>For an overview of module development, see <a href=".//doc/modules/developing/index.html">Developing and publishing
modules</a>.</li>
<li>For an end-to-end view, see <a href=".//doc/modules/release-workflow/index.html">Module release and versioning
workflow</a>.</li>
</ul>
<h2 id="considerations">Considerations for a major version update</h2>
<p>You should only update to a new major version when it’s absolutely necessary.
A major version update represents significant churn for both you and your
module’s users. When you’re considering a major version update, think about
the following:</p>
<ul>
<li>
<p>Be clear with your users about what releasing the new major version means
for your support of previous major versions.</p>
<p>Are previous versions deprecated? Supported as they were before? Will you be
maintaining previous versions, including with bug fixes?</p>
</li>
<li>
<p>Be ready to take on the maintenance of two versions: the old and the new.
For example, if you fix bugs in one, you’ll often be porting those fixes into
the other.</p>
</li>
<li>
<p>Remember that a new major version is a new module from a dependency management
perspective. Your users will need to update to use a new module after you
release, rather than simply upgrading.</p>
<p>That’s because a new major version has a different module path from the
preceding major version. For example, for a module whose module path is
example.com/mymodule, a v2 version would have the module path
example.com/mymodule/v2.</p>
</li>
<li>
<p>When you’re developing a new major version, you must also update import paths
wherever code imports packages from the new module. Your module’s users must
also update their import paths if they want to upgrade to the new major version.</p>
</li>
</ul>
<h2 id="branching">Branching for a major release</h2>
<p>The most straightforward approach to handling source when preparing to develop a
new major version is to branch the repository at the latest version of the
previous major version.</p>
<p>For example, in a command prompt you might change to your module’s root
directory, then create a new v2 branch there.</p>
<pre><code>$ cd mymodule
$ git checkout -b v2
Switched to a new branch &#34;v2&#34;
</code></pre>
<p><img src="images/v2-branch-module.png" alt="Diagram illustrating a repository branched from master to v2" style="width: 600px;"/></p>
<p>Once you have the source branched, you’ll need to make the following changes to
the source for your new version:</p>
<ul>
<li>
<p>In the new version’s go.mod file, append new major version number to the
module path, as in the following example:</p>
<ul>
<li>Existing version: <code>example.com/mymodule</code></li>
<li>New version: <code>example.com/mymodule/v2</code></li>
</ul>
</li>
<li>
<p>In your Go code, update every imported package path where you import a package
from the module, appending the major version number to the module path portion.</p>
<ul>
<li>Old import statement: <code>import &#34;example.com/mymodule/package1&#34;</code></li>
<li>New import statement: <code>import &#34;example.com/mymodule/v2/package1&#34;</code></li>
</ul>
</li>
</ul>
<p>For publishing steps, see <a href=".//doc/modules/publishing/index.html">Publishing a module</a>.</p>


</article>



</main>
<footer class="Site-footer">
  <div class="Footer">
    <div class="Container">
      <div class="Footer-links">
          <div class="Footer-linkColumn">
            <a href=".//solutions//index.html" class="Footer-link Footer-link--primary">
              Why Go
            </a>
              <a href=".//solutions//index.html" class="Footer-link">
                Use Cases
              </a>
              <a href=".//solutions//index.html" class="Footer-link">
                Case Studies
              </a>
          </div>
          <div class="Footer-linkColumn">
            <a href=".//learn//index.html" class="Footer-link Footer-link--primary">
              Get Started
            </a>
              <a href=".//play/index.html" class="Footer-link">
                Playground
              </a>
              <a href=".//tour//index.html" class="Footer-link">
                Tour
              </a>
              <a href=".//questions/tagged/go/index.html" class="Footer-link">
                Stack Overflow
              </a>
              <a href=".//help//index.html" class="Footer-link">
                Help
              </a>
          </div>
          <div class="Footer-linkColumn">
            <a href=".//index.html" class="Footer-link Footer-link--primary">
              Packages
            </a>
              <a href=".//pkg//index.html" class="Footer-link">
                Standard Library
              </a>
          </div>
          <div class="Footer-linkColumn">
            <a href=".//project/index.html" class="Footer-link Footer-link--primary">
              About
            </a>
              <a href=".//dl//index.html" class="Footer-link">
                Download
              </a>
              <a href=".//blog//index.html" class="Footer-link">
                Blog
              </a>
              <a href=".//golang/go/issues/index.html" class="Footer-link">
                Issue Tracker
              </a>
              <a href=".//doc/devel/release/index.html" class="Footer-link">
                Release Notes
              </a>
              <a href=".//go-brand/index.html" class="Footer-link">
                Brand Guidelines
              </a>
              <a href=".//conduct/index.html" class="Footer-link">
                Code of Conduct
              </a>
          </div>
          <div class="Footer-linkColumn">
            <a href=".//golang/index.html" class="Footer-link Footer-link--primary">
              Connect
            </a>
              <a href=".//golang/index.html" class="Footer-link">
                Twitter
              </a>
              <a href=".//golang/index.html" class="Footer-link">
                GitHub
              </a>
              <a href=".///index.html" class="Footer-link">
                Slack
              </a>
              <a href=".//r/golang/index.html" class="Footer-link">
                r/golang
              </a>
              <a href=".//pro/go/index.html" class="Footer-link">
                Meetup
              </a>
              <a href=".///index.html" class="Footer-link">
                Golang Weekly
              </a>
          </div>
      </div>
    </div>
  </div>
  <div class="Footer">
    <div class="Container Container--fullBleed">
      <div class="Footer-bottom">
        <img class="Footer-gopher" src="/images/gophers/pilot-bust.svg" alt="The Go Gopher"/>
        <ul class="Footer-listRow">
          <li class="Footer-listItem">
            <a href=".//copyright/index.html">Copyright</a>
          </li>
          <li class="Footer-listItem">
            <a href=".//tos/index.html">Terms of Service</a>
          </li>
          <li class="Footer-listItem">
            <a href=".//intl/en/policies/privacy//index.html" target="_blank" rel="noopener">
              Privacy Policy
            </a>
            </li>
          <li class="Footer-listItem">
            <a href=".//s/website-issue/index.html" target="_blank" rel="noopener">
              Report an Issue
            </a>
          </li>
        </ul>
        <a class="Footer-googleLogo" target="_blank" href=".//index.html" rel="noopener">
          <img class="Footer-googleLogoImg" src="/images/google-white.png" alt="Google logo"/>
        </a>
      </div>
    </div>
  </div>
  <script src="/js/jquery.js"></script>
  <script src="/js/carousels.js"></script>
  <script src="/js/searchBox.js"></script>
  <script src="/js/misc.js"></script>
  <script src="/js/hats.js"></script>
  <script src="/js/playground.js"></script>
  <script src="/js/godocs.js"></script>
</footer>
















</body></html>